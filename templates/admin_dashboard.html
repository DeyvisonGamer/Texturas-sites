{% extends "layout.html" %}
{% block content %}
  <h2>Painel Admin</h2>
  <p>Bem-vindo, Tenma (usuário admin padrão).</p>
  <section class="card">
    <h3>Upload de textura (.zip)</h3>
    <form method="post" action="/admin/upload" enctype="multipart/form-data" class="form">
      <label>Nome da textura</label>
      <input name="texture_name" value="Tenma">
      <label>Versão</label>
      <input name="version" placeholder="ex: 1.0.0">
      <label>Arquivo (.zip)</label>
      <input type="file" name="file" accept=".zip" required>
      <button class="btn" type="submit">Enviar</button>
    </form>
  </section>

  <section class="card">
    <h3>Versões</h3>
    {% if versions %}
      <ul>
        {% for v in versions %}
          <li>{{ v.name }} — {{ v.version or 'sem versão' }} — {{ v.uploaded_at }} — <a href="/download">download</a></li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Sem versões.</p>
    {% endif %}
  </section>

  <section class="card">
    <h3>Sugestões</h3>
    {% if suggestions %}
      <ul>
        {% for s in suggestions %}
          <li>{{ s.at }} — {{ s.text }}
            <form method="post" action="/admin/suggestions/delete/{{ loop.index0 }}" style="display:inline">
              <button class="btn small" type="submit">Remover</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Sem sugestões recebidas.</p>
    {% endif %}
  </section>

  <p><a href="/admin/logout">Sair</a></p>
{% endblock %}
