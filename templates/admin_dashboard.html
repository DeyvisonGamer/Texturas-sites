{% extends "layout.html" %}
{% block content %}
  <h2>Painel Admin</h2>
  <p>Bem-vindo, Tenma (usuário admin padrão).</p>

  <section class="card">
    <h3>Registrar textura — informar link</h3>
    <form method="post" action="/admin/upload" class="form">
      <label>Nome da textura</label>
      <input name="texture_name" value="Tenma">
      <label>Versão</label>
      <input name="version" placeholder="ex: 1.0.0">

      <label>Link do arquivo (http/https)</label>
      <input name="file_url" placeholder="https://exemplo.com/minha-textura.zip" required>

      <p class="muted">Informe um link público para o arquivo. O sistema salvará o link e o botão de download redirecionará para ele.</p>

      <button class="btn" type="submit">Registrar</button>
    </form>
  </section>

  <section class="card">
    <h3>Versões</h3>
    {% if versions %}
      <ul>
        {% for v in versions %}
          <li>
            {{ v.name }} — {{ v.version or 'sem versão' }} — {{ v.uploaded_at }} —
            {% if v.url %}
              <a href="{{ v.url }}" target="_blank" rel="noopener">download (link)</a>
            {% else %}
              <span>download (local) — compatibilidade</span>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Sem versões.</p>
    {% endif %}
  </section>

  <section class="card">
    <h3>Sugestões</h3>
    {% if suggestions %}
      <ul>
        {% for s in suggestions %}
          <li>{{ s.at }} — {{ s.text }}
            <form method="post" action="/admin/suggestions/delete/{{ loop.index0 }}" style="display:inline">
              <button class="btn small" type="submit">Remover</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Sem sugestões recebidas.</p>
    {% endif %}
  </section>

  <p><a href="/admin/logout">Sair</a></p>
{% endblock %}
